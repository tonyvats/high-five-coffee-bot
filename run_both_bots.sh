#!/bin/bash

echo "๐ ะะฐะฟััะบ ะพะฑะพะธั ะฑะพัะพะฒ..."

# ะัะพะฒะตััะตะผ, ััะพ Python ัััะฐะฝะพะฒะปะตะฝ
if ! command -v python3 &> /dev/null; then
    echo "โ Python3 ะฝะต ะฝะฐะนะดะตะฝ. ะฃััะฐะฝะพะฒะธัะต Python3 ะธ ะฟะพะฟัะพะฑัะนัะต ัะฝะพะฒะฐ."
    exit 1
fi

# ะัะพะฒะตััะตะผ, ััะพ ัะฐะนะปั ะฑะพัะพะฒ ัััะตััะฒััั
if [ ! -f "hfcbot.py" ]; then
    echo "โ ะคะฐะนะป hfcbot.py ะฝะต ะฝะฐะนะดะตะฝ!"
    exit 1
fi

if [ ! -f "hfctbot.py" ]; then
    echo "โ ะคะฐะนะป hfctbot.py ะฝะต ะฝะฐะนะดะตะฝ!"
    exit 1
fi

# ะัะพะฒะตััะตะผ, ััะพ ัะพะบะตะฝ ะฒัะพัะพะณะพ ะฑะพัะฐ ะทะฐะผะตะฝะตะฝ
if grep -q "YOUR_NEW_BOT_TOKEN_HERE" hfctbot.py; then
    echo "โ๏ธ  ะะะะะะะะ: ะ ัะฐะนะปะต hfctbot.py ะฝะต ะทะฐะผะตะฝะตะฝ ัะพะบะตะฝ!"
    echo "   ะะฐะผะตะฝะธัะต 'YOUR_NEW_BOT_TOKEN_HERE' ะฝะฐ ะฒะฐั ะฝะพะฒัะน ัะพะบะตะฝ ะพั @BotFather"
    echo "   ะกะผ. ัะฐะนะป NEW_BOT_SETUP.md ะดะปั ะธะฝััััะบัะธะน"
    exit 1
fi

echo "โ ะัะต ะฟัะพะฒะตัะบะธ ะฟัะพะนะดะตะฝั"
echo "๐ฑ ะะฐะฟััะบ ะฟะตัะฒะพะณะพ ะฑะพัะฐ (hfcbot.py)..."
echo "๐ฑ ะะฐะฟััะบ ะฒัะพัะพะณะพ ะฑะพัะฐ (hfctbot.py)..."

# ะะฐะฟััะบะฐะตะผ ะพะฑะฐ ะฑะพัะฐ ะฒ ัะพะฝะต
python3 hfcbot.py > bot1.log 2>&1 &
BOT1_PID=$!

python3 hfctbot.py > bot2.log 2>&1 &
BOT2_PID=$!

echo "โ ะะพัั ะทะฐะฟััะตะฝั!"
echo "๐ PID ะฟะตัะฒะพะณะพ ะฑะพัะฐ: $BOT1_PID"
echo "๐ PID ะฒัะพัะพะณะพ ะฑะพัะฐ: $BOT2_PID"
echo ""
echo "๐ ะะพะณะธ ะฟะตัะฒะพะณะพ ะฑะพัะฐ: bot1.log"
echo "๐ ะะพะณะธ ะฒัะพัะพะณะพ ะฑะพัะฐ: bot2.log"
echo ""
echo "๐ ะะปั ะพััะฐะฝะพะฒะบะธ ะฑะพัะพะฒ ะฒัะฟะพะปะฝะธัะต:"
echo "   kill $BOT1_PID $BOT2_PID"
echo ""
echo "๐ ะะปั ะฟัะพัะผะพััะฐ ะปะพะณะพะฒ ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ:"
echo "   tail -f bot1.log  # ะฒ ะพะดะฝะพะผ ัะตัะผะธะฝะฐะปะต"
echo "   tail -f bot2.log  # ะฒ ะดััะณะพะผ ัะตัะผะธะฝะฐะปะต"

# ะะดะตะผ ะทะฐะฒะตััะตะฝะธั
wait

#!/bin/bash

echo "ðŸš€ Ð Ð°Ð·Ð²Ñ‘Ñ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ðµ High Five Coffee Bot Ð½Ð° Ð¯Ð½Ð´ÐµÐºÑ ÐžÐ±Ð»Ð°ÐºÐµ"

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð½Ð°Ð»Ð¸Ñ‡Ð¸Ðµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ
if [ -z "$BOT_TOKEN" ]; then
    echo "âŒ ÐžÑˆÐ¸Ð±ÐºÐ°: BOT_TOKEN Ð½Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½"
    echo "ðŸ’¡ Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½ÑƒÑŽ: export BOT_TOKEN='Ð²Ð°Ñˆ_Ñ‚Ð¾ÐºÐµÐ½'"
    exit 1
fi

if [ -z "$ADMIN_IDS" ]; then
    echo "âŒ ÐžÑˆÐ¸Ð±ÐºÐ°: ADMIN_IDS Ð½Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½"
    echo "ðŸ’¡ Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½ÑƒÑŽ: export ADMIN_IDS='462076,306535565'"
    exit 1
fi

echo "âœ… ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ñ‹"

# Ð¡Ð¾Ð·Ð´Ð°Ñ‘Ð¼ .env Ñ„Ð°Ð¹Ð»
cat > .env << EOF
BOT_TOKEN=$BOT_TOKEN
ADMIN_IDS=$ADMIN_IDS
EOF

echo "âœ… Ð¤Ð°Ð¹Ð» .env ÑÐ¾Ð·Ð´Ð°Ð½"

# Ð¡Ð¾Ð±Ð¸Ñ€Ð°ÐµÐ¼ Ð¸ Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÐ¼ Docker ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€
echo "ðŸ³ Ð¡Ð¾Ð±Ð¸Ñ€Ð°ÐµÐ¼ Docker Ð¾Ð±Ñ€Ð°Ð·..."
docker-compose build

echo "ðŸš€ Ð—Ð°Ð¿ÑƒÑÐºÐ°ÐµÐ¼ Ð±Ð¾Ñ‚Ð°..."
docker-compose up -d

echo "âœ… Ð‘Ð¾Ñ‚ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½!"
echo "ðŸ“Š Ð¡Ñ‚Ð°Ñ‚ÑƒÑ: docker-compose ps"
echo "ðŸ“ Ð›Ð¾Ð³Ð¸: docker-compose logs -f"
echo "ðŸ›‘ ÐžÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ: docker-compose down"
